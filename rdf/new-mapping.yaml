prefixes:
  ex: "http://example.org/youtube/"
  wd: "http://www.wikidata.org/entity/"
  wdt: "http://www.wikidata.org/prop/direct/"
  xsd: "http://www.w3.org/2001/XMLSchema#"
  schema: "http://schema.org/"
  rdfs: "http://www.w3.org/2000/01/rdf-schema#"
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"

mappings:

  ChannelMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            id AS ChannelID,
            name AS ChannelName,
            language AS Language,
            description AS Description,
            suscriber_count AS SubscriberCount,
            banner AS Banner,
            category_link AS CategoryLink
          FROM channel;
        username: postgres
        password: postgres
    s: ex:channel_$(ChannelID)
    po:
      - [a, wd:Q17558136]                          # YouTube channel
      - [rdfs:label, $(ChannelName)]
      - [schema:name, $(ChannelName)]
      - [wdt:P407, $(Language)]                    # language of the channel
      - [wdt:P3744, $(SubscriberCount), xsd:integer] # number of subscribers
      - [schema:description, $(Description)]
      - [schema:thumbnailUrl, $(Banner)]

  VideoMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            v.id AS VideoID,
            v.title_raw AS Title,
            v.title_processed AS TitleProcessed,
            v.description AS Description,
            v.published_at AS PublishedAt,
            v.language AS Language,
            v.duration AS Duration,
            v.view_count AS ViewCount,
            v.like_count AS LikeCount,
            v.comment_count AS CommentCount,
            v.topic AS Topic,
            v.id_channel AS ChannelID
          FROM video v;
        username: postgres
        password: postgres
    s: ex:video_$(VideoID)
    po:
      - [a, wd:Q63412991]                          # YouTube video
      - [rdfs:label, $(Title)]
      - [schema:name, $(Title)]
      - [schema:description, $(Description)]
      - [schema:datePublished, $(PublishedAt), xsd:date]
      - [wdt:P407, $(Language)]                    # language of the video
      - [wdt:P2047, $(Duration)]                   # duration
      - [wdt:P5436, $(ViewCount), xsd:integer]     # number of views
      - [wdt:P10649, $(LikeCount), xsd:integer]    # number of likes
      - [wdt:P10651, $(CommentCount), xsd:integer] # number of comments
      - [schema:keywords, $(Topic)]                # video topic
      - [schema:uploadDate, $(PublishedAt), xsd:date]
      - [wdt:P123, ex:channel_$(ChannelID)]        # published by channel

  CategoryMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            id AS CategoryID,
            name AS CategoryName
          FROM category;
        username: postgres
        password: postgres
    s: ex:category_$(CategoryID)
    po:
      - [a, wd:Q6421128]                          # YouTube category
      - [rdfs:label, $(CategoryName)]
      - [schema:name, $(CategoryName)]

  VideoCategoryMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            vc.id_video AS VideoID,
            vc.id_category AS CategoryID
          FROM video_category vc;
        username: postgres
        password: postgres
    s: ex:video_$(VideoID)
    po:
      - [schema:about, ex:category_$(CategoryID)]  # video belongs to category

  CommentMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            c.id AS CommentID,
            c.text AS CommentText,
            c.published_at AS PublishedAt,
            c.is_response AS IsResponse,
            c.like_count AS LikeCount,
            c.is_possitive AS IsPositive,
            c.is_formal AS IsFormal,
            c.id_channel AS ChannelID,
            c.id_video AS VideoID
          FROM comment c;
        username: postgres
        password: postgres
    s: ex:comment_$(CommentID)
    po:
      - [a, wd:Q25345994]                          # Comment
      - [rdfs:label, $(CommentText)]
      - [schema:text, $(CommentText)]
      - [schema:datePublished, $(PublishedAt), xsd:date]
      - [wdt:P10649, $(LikeCount), xsd:integer]    # number of likes
      - [ex:isResponse, $(IsResponse), xsd:boolean]
      - [ex:isPositive, $(IsPositive), xsd:boolean]
      - [ex:isFormal, $(IsFormal), xsd:boolean]
      - [schema:author, ex:channel_$(ChannelID)]   # comment author
      - [schema:about, ex:video_$(VideoID)]        # comment about video

  RatingMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            id AS RatingID,
            name AS RatingName
          FROM rating;
        username: postgres
        password: postgres
    s: ex:rating_$(RatingID)
    po:
      - [a, schema:Rating]
      - [rdfs:label, $(RatingName)]
      - [schema:name, $(RatingName)]

  VideoRatingMapping:
    sources:
      - access: jdbc:postgresql://postgres:5432/bbdd_api_youtube
        query: >
          SELECT 
            vr.id_video AS VideoID,
            vr.id_rating AS RatingID
          FROM video_rating vr;
        username: postgres
        password: postgres
    s: ex:video_$(VideoID)
    po:
      - [schema:contentRating, ex:rating_$(RatingID)]